"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var React=require("react"),React__default=_interopDefault(React),reactDom=require("react-dom");const eventManager={ids:[],add:function(e,t){this.ids.push({id:e,callback:t})},remove:function(e){if(e){const{callback:t}=this.ids.find(t=>t.id===e);t(),this.ids=this.ids.filter(t=>t.id!==e)}else this.ids.forEach(e=>e.callback()),this.ids=[]}},filter=(e,t)=>e.filter(e=>e.key!=t),Notification=({message:e,onClose:t,type:i="info",width:n="300px",rtl:r,closeOnClick:a,onMouseEnter:s,onMouseLeave:o})=>React__default.createElement("div",{className:`item ${i} ${r?"rtl":"ltr"}`,style:{width:n},onClick:()=>a&&t(),onMouseEnter:s,onMouseLeave:o},React__default.createElement("span",null,e),React__default.createElement("button",{onClick:t},"âœ–")),timers={};class Timer{constructor(e,t){let i=-1,n=0;this.remaining=t,this.pause=()=>{clearTimeout(i),this.remaining-=Date.now()-n},this.resume=()=>{n=Date.now(),clearTimeout(i),i=setTimeout(e,this.remaining)},this.resume()}}var NotificationContainer=e=>{const[,t]=React.useState([]),[i,n]=React.useState(!1),[r,a]=React.useState(!1),s=React.useRef([]),{autoClose:o=3e3,delay:c=0,id:l}=e,{animation:u={}}=e,m=u.duration||300,d=o>0?o:0,f=i=>{s.current=filter(s.current,i),t(s.current),0===s.current.length&&e.cleared()};return React.useEffect(()=>{const e=s.current.findIndex(e=>e.key==l),n=s.current[e];if(!n)return;const a=timers[l].remaining,o=i&&!r?{}:{animationName:`${u.out}`,animationDelay:`${a-m}ms`,animationDuration:`${m}ms`},c=React__default.cloneElement(n,Object.assign({},n.props,{style:o}));s.current.splice(e,1,c),t([...s.current])},[i,r]),React.useEffect(()=>{const i={id:l,onClose:()=>{setTimeout(()=>f(l),m),timers[l].remaining=m,a(!0)},onMouseEnter:()=>r("pause"),onMouseLeave:()=>r("resume")},r=t=>{e.pauseOnHover&&timers[l]&&timers[l][t](),n("pause"===t)};let g=e.render?e.render(i):React__default.createElement(Notification,Object.assign({},e,i));m&&(g=React__default.createElement("div",{key:l,style:{animationName:`${u.in}, ${u.out}`,animationDelay:`0ms, ${d}ms`,animationDuration:`${m}ms, ${m}ms`}},g));const p=e.onlyLast?[]:s.current,{newestOnTop:_=!0}=e;s.current=_?[g,...p]:[...p,g],eventManager.add(l,()=>f(l)),setTimeout(()=>t(s.current),c),timers[l]=new Timer(()=>o&&f(l),c+d+m)},[e]),React__default.createElement(React__default.Fragment,null,s.current)};const cls="simple-react-notifier";let globalCfg,id=0;const notifier=e=>{e=Object.assign({},globalCfg||{},e);const{position:t="top-right"}=e;let i=document.querySelector("."+cls+"."+t);return i||((i=document.createElement("div")).classList.add(cls,t),i.style.direction=e.rtl?"rtl":"ltr",document.body.appendChild(i)),reactDom.render(React__default.createElement(NotificationContainer,Object.assign({},e,{id:id,cleared:()=>{try{document.body.removeChild(i)}catch(e){}}})),i),++id-1};notifier.info=e=>notifier({message:e,type:"info"}),notifier.success=e=>notifier({message:e,type:"success"}),notifier.error=e=>notifier({message:e,type:"error"}),notifier.warn=e=>notifier({message:e,type:"warn"}),notifier.configure=e=>{globalCfg=e},notifier.dismiss=e=>eventManager.remove(e),exports.default=notifier;
//# sourceMappingURL=index.js.map
